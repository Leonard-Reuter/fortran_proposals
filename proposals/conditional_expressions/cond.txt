To: J3                                                     J3/XXX
From: Ondrej Certik
Subject: Conditional expressions using intrinsic function
References: 21-157, 21-159
Date: 2021-June-26

Paper 21-157 proposes two syntactic forms for
conditional expressions. The paper 21-159 proposes
an alternative form. This paper proposes to implement
conditional expressions using an intrinsic function.

The syntactic forms in 21-157 are too verbose, as argued in 21-159. The form in
21-159 is concise, but based on the poll [1], it is not the most popular
either.

We propose the following syntactic form

   <cond-expr> is ifthen( predicate, consequent,
                      [ ifthen( predicate, consequent, ]*
                      alternative) [)]*

where the predicates are scalar logical expressions
and the consequents and alternative are compatible
expressions. The number of `)` must match the number of `ifthen(` used.

Examples:

      res = ifthen(x >= 0.0, sqrt(x), -0.0)

      res = ifthen(present(x), a, ifthen(present(b), b, 0))

References:

[1] https://fortran-lang.discourse.group/t/poll-fortran-202x-conditional-expressions-syntax/1425
